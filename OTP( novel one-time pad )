import random

def generate_key(length):
    """Generate a key using pseudo-random numbers (not secure)."""
    return bytes([random.randint(0, 255) for _ in range(length)])

def encrypt(plaintext, key):
    """Encrypt plaintext using the key."""
    if len(plaintext) != len(key):
        raise ValueError("Key must be the same length as plaintext")
    
    # XOR each byte of plaintext with key
    ciphertext = bytes([p ^ k for p, k in zip(plaintext, key)])
    return ciphertext

def decrypt(ciphertext, key):
    """Decrypt ciphertext using the key."""
    return encrypt(ciphertext, key)  # XOR again recovers plaintext

# -------- DEMO --------
if __name__ == "__main__":
    message = "HELLO WORLD"
    plaintext = message.encode("utf-8")  # convert to bytes

    key = generate_key(len(plaintext))  # generate random key
    ciphertext = encrypt(plaintext, key)
    decrypted = decrypt(ciphertext, key)

    print("Plaintext: ", message)
    print("Key (hex): ", key.hex())
    print("Ciphertext (hex): ", ciphertext.hex())
    print("Decrypted: ", decrypted.decode("utf-8"))

